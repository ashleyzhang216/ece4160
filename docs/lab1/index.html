---
layout: default
title: Lab 1
---
<div class="blurb">
	<h1>Lab 1</h1>

    <h2>Summary</h2>
    <p>
        During this lab, we wanted to become more comfortable with the Artemis board, since we would 
        be using this microcontroller for the duration of this class. In order to do so, I tested some basic 
        example programs on the board, and implemented basic bluetooth functionality to make it compatible with 
        the jupyter lab virtual environment. 
    </p>

    <h2>Test Programs</h2>
    <p>
        After receiving the board, the first order of business was making sure that it worked properly. To do 
        this, I was tasked with uploading a few example programs onto the board and making sure the output was 
        as expected. The first one was a blink program, just to make sure that I could actually program the Artemis 
        board. Next, I made sure that the serial communication worked, and that two way messages could be sent and 
        received. After that, I tested the analog temperature sensor on the board. And finally, I also ensured that 
        the microphone functioned properly. 
    </p>
    <p>
        You can see a video of the blink program, and screenshots of the serial monitor during the other tests below. 
    </p>
    <table>
        <tr>
            <th>Blink</th>
            <th>Serial</th>
        </tr>
        <tr>
            <td><video height="200px" controls><source src="https://ashleyzhang216.github.io/ece4160/media/lab1/IMG_9649.MOV">Your browser does not support this video format.</video></td>
            <td><img src="https://ashleyzhang216.github.io/ece4160/media/lab1/serial_example.png" height="200px"></td>
        </tr>
        <tr>
            <th>Temperature</th>
            <th>Microphone</th>
        </tr>
        <tr>
            <td><img src="https://ashleyzhang216.github.io/ece4160/media/lab1/temp_sensor.png" height="200px"></td>
            <td><img src="https://ashleyzhang216.github.io/ece4160/media/lab1/mic_sensor.png" height="200px"></td>
        </tr>
    </table>

    <h2>Setting up Bluetooth</h2>
    <p>
        The next section of the lab involved getting bluetooth working with the Artemis board. Following the instructions to create a virtual 
        environment on my laptop was straightforward. Next, I uploaded the example BLE script to my Artemis and obtained its MAC address. 
    </p>
    <table>
        <tr>
            <th>Virtual Env</th>
        </tr>
        <tr>
            <td><img src="https://ashleyzhang216.github.io/ece4160/media/lab1/virtual_env.png" height="200px"></td>
        </tr>
        <tr>
            <th>MAC Address</th>
        </tr>
        <tr>
            <td><img src="https://ashleyzhang216.github.io/ece4160/media/lab1/mac_addr.png" height="100px"></td>
        </tr>
    </table>

    <p>
        After that, I generated a UUID to use, and updated my connections yaml file to use it and the MAC address found earlier. 
        Using this, I was able to successfully connect to my microcontroller. However, this took a few tries. I initially kept getting 
        weird timeout errors where my laptop was unable to find my robot, despite it showing up on a bluetooth scanner. The solution, it 
        turned out, was two-fold. On one hand, I had mistakenly selected the wrong board type in the Arduino IDE when programming my Artemis. 
        On the other, with the help of Jonathan, I also had to make a small change to the provided base_ble.py to connect to the first suitable 
        device found, instead of proceeding to accidentally filter my Artemis board out of the list of candidates in _get_ble_device(). 
    </p>
    <table>
        <tr>
            <th>UUID</th>
            <th>Connections</th>
        </tr>
        <tr>
            <td><img src="https://ashleyzhang216.github.io/ece4160/media/lab1/uuid.png" height="200px"></td>
            <td><img src="https://ashleyzhang216.github.io/ece4160/media/lab1/connections.png" height="200px"></td>
        </tr>
        <tr>
            <th>Connected</th>
        </tr>
        <tr>
            <td><img src="https://ashleyzhang216.github.io/ece4160/media/lab1/connected.png" height="200px"></td>
        </tr>
    </table>

    <h2>Bluetooth Experimentation</h2>
    <p>
        With a connection established, I proceeded to the other tasks in the lab. I modified the Arduino script to implement the ECHO case. 
        The provided code already read the incoming message and placed it in char_arr. After some experimentation, I found that by simply 
        clearing then appending the incoming message into tx_estring_value, I could write its value to tx_characteristic_string, which would 
        then send the message back to my laptop in the main BLE loop via write_data(). Using the receive_string() method in the juypter notebook, 
        I completed a loop where my laptop would recieve an echoed value from the Artemis that I had originally sent it. 
    </p>
    <p>
        However, this process was tedious and required me to separately run a command to receive messages from my Artemis. So, I created a notification 
        handler to receive timestamps from my robot. Since all my timestamps started with "T:", followed by the numerical time, I simply removed the first 
        two characters from the recieved string before printing the result. 
    </p>
    <table>
        <tr>
            <th>Echo</th>
            <th>Getting Time</th>
        </tr>
        <tr>
            <td><img src="https://ashleyzhang216.github.io/ece4160/media/lab1/echo.png" height="150px"></td>
            <td><img src="https://ashleyzhang216.github.io/ece4160/media/lab1/get_time.png" height="150px"></td>
        </tr>
        <tr>
            <th>Notif Handler</th>
            <th>Getting Time with Handler</th>
        </tr>
        <tr>
            <td><img src="https://ashleyzhang216.github.io/ece4160/media/lab1/time_notif_handle.png" height="200px"></td>
            <td><img src="https://ashleyzhang216.github.io/ece4160/media/lab1/get_time_with_notif_handle.png" height="200px"></td>
        </tr>
    </table>
    
    <img src="https://ashleyzhang216.github.io/ece4160/media/lab1/get_temp_loop.png" height="200px">
    <img src="https://ashleyzhang216.github.io/ece4160/media/lab1/get_time_loop.png" height="200px">
    <img src="https://ashleyzhang216.github.io/ece4160/media/lab1/get_time_transmit_loop.png" height="200px">


    <h2>Lab 1 Maze Demo</h2>
    <img src="/ayz27/ayz27.github.io/media/lab1/mazelayout.jfif" height="400px">
    <p>
        Putting all of it together, our culminating goal for Lab 1 was for our robot to navigate a maze, as shown above.
        The robot would navigate from point 1 to 4, arriving at points 2 and 3 along the way. Then, it would
        backtrack all the way to point 1, and perform a 540 degree turn to end its journey. At each point the
        robot reaches, it prints data captured by each of its three ultrasonic sensors.
    </p>
    <p>
        Below, you can see a video of our robot performing the demo on the left side, and a video of the corresponding
        console output on the right side.
    </p>

    <table>
        <tr>
            <th>Demo</th>
            <th>Console</th>
        </tr>
        <tr>
            <td>
                <video height="350" controls>
                    <source src="/ayz27/ayz27.github.io/media/lab1/demo.MOV">
                    Your browser does not support this video format.
                </video>
            </td>
            <td>
                <video height="350" controls>
                    <source src="/ayz27/ayz27.github.io/media/lab1/console.MOV">
                    Your browser does not support this video format.
                </video>
            </td>
        </tr>
    </table>

</div><!-- /.blurb -->